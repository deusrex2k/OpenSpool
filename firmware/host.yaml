# Host.yaml is a dummy file that allows for quick compiling and testing without an esp32

# Setup
# brew install mbedtls

esphome:
  name: host_device
  friendly_name: Host Device
  includes:
    - bambu.h
  platformio_options:
    lib_deps:
      - bblanchon/ArduinoJson @ ^6.21.5
    build_flags:
     # - -DMBEDTLS_CONFIG_FILE=\"mbedtls/esp_config.h\"
      - "-I/opt/homebrew/include"
      - "-L/opt/homebrew/lib"
      - "-lmbedtls"
      - "-lmbedcrypto"
      - "-lmbedx509"
      - "-DMBEDTLS_CONFIG_FILE=\\\"mbedtls/mbedtls_config.h\\\""

host:
  mac_address: "DE:AD:BE:EF:c0:FE"

logger:
  level: DEBUG

# Text sensor to say hello world
text_sensor:
  - platform: template
    name: "Hello World"
    id: hello_world
    lambda: |-
      return {"Hello World"};
    on_value:
      then:
        - logger.log:
            format: "Hello World sensor value: %s"
            args: ["x.c_str()"]

  - platform: template
    name: "keys"
    id: generate_keys
    lambda: |-
      return {"Hello World 2"};
    on_value:
      then:
        - lambda: |-
            bambulabs::generate_keys();

# calling bambulabs::generate_keys() with the hard coded uid 5a-c9-00-a6
# should return the following keys
# 63e5af2c1d75
# 40d146ce6e01
# 6a66957dcc91
# 15e7041f68d9
# 7ee1ac7fa75f
# 55cbbad18673
# ce5901af9416
# a223a193e6a3
# 24f4d022f402
# 7df999dd836b
# b0dac4a48903
# b026ab566f11
# 8b495d5a0b44
# 7ebef1cb3e94
# 4685790c6e01
# 3f00144c7b4a
